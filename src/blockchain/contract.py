from config.settings import WEB3, GANACHE_URL

bytecode = "608060405234801561001057600080fd5b5061198f806100206000396000f3fe6080604052600436106100a05760003560e01c8063816c99de11610064578063816c99de146101935780638d59cc02146101d4578063a87430ba146101fd578063ad20df4e1461023c578063e28b03ba14610258578063ee0671ae14610299576100a7565b80630e70ee0c146100a957806312065fe0146100c55780632f19d50b146100f057806338266b221461011957806352de70af14610156576100a7565b366100a757005b005b6100c360048036038101906100be9190610dd9565b6102c4565b005b3480156100d157600080fd5b506100da6104bd565b6040516100e79190610e1f565b60405180910390f35b3480156100fc57600080fd5b5061011760048036038101906101129190610f80565b6104dc565b005b34801561012557600080fd5b50610140600480360381019061013b9190610dd9565b61056b565b60405161014d919061105b565b60405180910390f35b34801561016257600080fd5b5061017d6004803603810190610178919061107d565b6106cc565b60405161018a91906110df565b60405180910390f35b34801561019f57600080fd5b506101ba60048036038101906101b59190611126565b6106fc565b6040516101cb95949392919061117d565b60405180910390f35b3480156101e057600080fd5b506101fb60048036038101906101f691906111d0565b61078f565b005b34801561020957600080fd5b50610224600480360381019061021f9190610dd9565b6108ca565b6040516102339392919061125b565b60405180910390f35b61025660048036038101906102519190611126565b610989565b005b34801561026457600080fd5b5061027f600480360381019061027a9190611126565b610bed565b60405161029095949392919061117d565b60405180910390f35b3480156102a557600080fd5b506102ae610d5a565b6040516102bb9190610e1f565b60405180910390f35b60003411610307576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016102fe906112e5565b60405180910390fd5b8073ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1603610375576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161036c90611351565b60405180910390fd5b60016040518060a001604052803373ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff16815260200134815260200142815260200160001515815250908060018154018082558091505060019003906000526020600020906005020160009091909190915060008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604082015181600201556060820151816003015560808201518160040160006101000a81548160ff021916908315150217905550505050565b60003373ffffffffffffffffffffffffffffffffffffffff1631905090565b6104e5816106cc565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001015414610567576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161055e906113bd565b60405180910390fd5b5050565b60606000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff166105fb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016105f290611429565b60405180910390fd5b6000808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600001805461064790611478565b80601f016020809104026020016040519081016040528092919081815260200182805461067390611478565b80156106c05780601f10610695576101008083540402835291602001916106c0565b820191906000526020600020905b8154815290600101906020018083116106a357829003601f168201915b50505050509050919050565b6000816040516020016106df91906114e5565b604051602081830303815290604052805190602001209050919050565b6001818154811061070c57600080fd5b90600052602060002090600502016000915090508060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020154908060030154908060040160009054906101000a900460ff16905085565b6000808473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff161561081e576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161081590611548565b60405180910390fd5b6040518060600160405280838152602001610838836106cc565b8152602001600115158152506000808573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000190816108979190611714565b506020820151816001015560408201518160020160006101000a81548160ff021916908315150217905550905050505050565b60006020528060005260406000206000915090508060000180546108ed90611478565b80601f016020809104026020016040519081016040528092919081815260200182805461091990611478565b80156109665780601f1061093b57610100808354040283529160200191610966565b820191906000526020600020905b81548152906001019060200180831161094957829003601f168201915b5050505050908060010154908060020160009054906101000a900460ff16905083565b60018054905081106109d0576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109c790611832565b60405180910390fd5b60001515600182815481106109e8576109e7611852565b5b906000526020600020906005020160040160009054906101000a900460ff16151514610a49576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a40906118cd565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff1660018281548110610a7457610a73611852565b5b906000526020600020906005020160010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614610afc576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610af390611939565b60405180910390fd5b60018181548110610b1057610b0f611852565b5b906000526020600020906005020160010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc60018381548110610b6f57610b6e611852565b5b9060005260206000209060050201600201549081150290604051600060405180830381858888f19350505050158015610bac573d6000803e3d6000fd5b506001808281548110610bc257610bc1611852565b5b906000526020600020906005020160040160006101000a81548160ff02191690831515021790555050565b60008060008060006001805490508610610c3c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610c3390611832565b60405180910390fd5b60018681548110610c5057610c4f611852565b5b906000526020600020906005020160000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1660018781548110610c9657610c95611852565b5b906000526020600020906005020160010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1660018881548110610cdc57610cdb611852565b5b90600052602060002090600502016002015460018981548110610d0257610d01611852565b5b90600052602060002090600502016003015460018a81548110610d2857610d27611852565b5b906000526020600020906005020160040160009054906101000a900460ff169450945094509450945091939590929450565b6000600180549050905090565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000610da682610d7b565b9050919050565b610db681610d9b565b8114610dc157600080fd5b50565b600081359050610dd381610dad565b92915050565b600060208284031215610def57610dee610d71565b5b6000610dfd84828501610dc4565b91505092915050565b6000819050919050565b610e1981610e06565b82525050565b6000602082019050610e346000830184610e10565b92915050565b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b610e8d82610e44565b810181811067ffffffffffffffff82111715610eac57610eab610e55565b5b80604052505050565b6000610ebf610d67565b9050610ecb8282610e84565b919050565b600067ffffffffffffffff821115610eeb57610eea610e55565b5b610ef482610e44565b9050602081019050919050565b82818337600083830152505050565b6000610f23610f1e84610ed0565b610eb5565b905082815260208101848484011115610f3f57610f3e610e3f565b5b610f4a848285610f01565b509392505050565b600082601f830112610f6757610f66610e3a565b5b8135610f77848260208601610f10565b91505092915050565b60008060408385031215610f9757610f96610d71565b5b6000610fa585828601610dc4565b925050602083013567ffffffffffffffff811115610fc657610fc5610d76565b5b610fd285828601610f52565b9150509250929050565b600081519050919050565b600082825260208201905092915050565b60005b83811015611016578082015181840152602081019050610ffb565b60008484015250505050565b600061102d82610fdc565b6110378185610fe7565b9350611047818560208601610ff8565b61105081610e44565b840191505092915050565b600060208201905081810360008301526110758184611022565b905092915050565b60006020828403121561109357611092610d71565b5b600082013567ffffffffffffffff8111156110b1576110b0610d76565b5b6110bd84828501610f52565b91505092915050565b6000819050919050565b6110d9816110c6565b82525050565b60006020820190506110f460008301846110d0565b92915050565b61110381610e06565b811461110e57600080fd5b50565b600081359050611120816110fa565b92915050565b60006020828403121561113c5761113b610d71565b5b600061114a84828501611111565b91505092915050565b61115c81610d9b565b82525050565b60008115159050919050565b61117781611162565b82525050565b600060a0820190506111926000830188611153565b61119f6020830187611153565b6111ac6040830186610e10565b6111b96060830185610e10565b6111c6608083018461116e565b9695505050505050565b6000806000606084860312156111e9576111e8610d71565b5b60006111f786828701610dc4565b935050602084013567ffffffffffffffff81111561121857611217610d76565b5b61122486828701610f52565b925050604084013567ffffffffffffffff81111561124557611244610d76565b5b61125186828701610f52565b9150509250925092565b600060608201905081810360008301526112758186611022565b905061128460208301856110d0565b611291604083018461116e565b949350505050565b7f4e6f74206d6f6e65790000000000000000000000000000000000000000000000600082015250565b60006112cf600983610fe7565b91506112da82611299565b602082019050919050565b600060208201905081810360008301526112fe816112c2565b9050919050565b7f43616e27742073656e6420746f20796f757273656c6600000000000000000000600082015250565b600061133b601683610fe7565b915061134682611305565b602082019050919050565b6000602082019050818103600083015261136a8161132e565b9050919050565b7f50617373776f726473206661696c656400000000000000000000000000000000600082015250565b60006113a7601083610fe7565b91506113b282611371565b602082019050919050565b600060208201905081810360008301526113d68161139a565b9050919050565b7f4163636f756e74206e6f7420666f756e64000000000000000000000000000000600082015250565b6000611413601183610fe7565b915061141e826113dd565b602082019050919050565b6000602082019050818103600083015261144281611406565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061149057607f821691505b6020821081036114a3576114a2611449565b5b50919050565b600081905092915050565b60006114bf82610fdc565b6114c981856114a9565b93506114d9818560208601610ff8565b80840191505092915050565b60006114f182846114b4565b915081905092915050565b7f5573657220666f756e6465640000000000000000000000000000000000000000600082015250565b6000611532600c83610fe7565b915061153d826114fc565b602082019050919050565b6000602082019050818103600083015261156181611525565b9050919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026115ca7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261158d565b6115d4868361158d565b95508019841693508086168417925050509392505050565b6000819050919050565b600061161161160c61160784610e06565b6115ec565b610e06565b9050919050565b6000819050919050565b61162b836115f6565b61163f61163782611618565b84845461159a565b825550505050565b600090565b611654611647565b61165f818484611622565b505050565b5b818110156116835761167860008261164c565b600181019050611665565b5050565b601f8211156116c85761169981611568565b6116a28461157d565b810160208510156116b1578190505b6116c56116bd8561157d565b830182611664565b50505b505050565b600082821c905092915050565b60006116eb600019846008026116cd565b1980831691505092915050565b600061170483836116da565b9150826002028217905092915050565b61171d82610fdc565b67ffffffffffffffff81111561173657611735610e55565b5b6117408254611478565b61174b828285611687565b600060209050601f83116001811461177e576000841561176c578287015190505b61177685826116f8565b8655506117de565b601f19841661178c86611568565b60005b828110156117b45784890151825560018201915060208501945060208101905061178f565b868310156117d157848901516117cd601f8916826116da565b8355505b6001600288020188555050505b505050505050565b7f496e646578206f7574206f662072616e67650000000000000000000000000000600082015250565b600061181c601283610fe7565b9150611827826117e6565b602082019050919050565b6000602082019050818103600083015261184b8161180f565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b7f5472616e7366657220697320636f6d706c657465640000000000000000000000600082015250565b60006118b7601583610fe7565b91506118c282611881565b602082019050919050565b600060208201905081810360008301526118e6816118aa565b9050919050565b7f596f75277265206e6f74206120726563697069656e7400000000000000000000600082015250565b6000611923601683610fe7565b915061192e826118ed565b602082019050919050565b6000602082019050818103600083015261195281611916565b905091905056fea264697066735822122082066f3f046c96fd5966fbc819860fbf9becf401e8bf39b45372fcf41904179864736f6c63430008180033"
abi = '''[
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_indx",
				"type": "uint256"
			}
		],
		"name": "confirmToTransfer",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_account",
				"type": "address"
			},
			{
				"internalType": "string",
				"name": "_name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "_password",
				"type": "string"
			}
		],
		"name": "register",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_recipient",
				"type": "address"
			}
		],
		"name": "sendTransferTo",
		"outputs": [],
		"stateMutability": "payable",
		"type": "function"
	},
	{
		"stateMutability": "payable",
		"type": "fallback"
	},
	{
		"stateMutability": "payable",
		"type": "receive"
	},
	{
		"inputs": [],
		"name": "getBalance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "targetAddress",
				"type": "address"
			}
		],
		"name": "getData",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "_indx",
				"type": "uint256"
			}
		],
		"name": "getTransferDetailsByIndex",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			},
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "getTransferHistory",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "_account",
				"type": "address"
			},
			{
				"internalType": "string",
				"name": "_password",
				"type": "string"
			}
		],
		"name": "login",
		"outputs": [],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "value",
				"type": "string"
			}
		],
		"name": "makeHash",
		"outputs": [
			{
				"internalType": "bytes32",
				"name": "",
				"type": "bytes32"
			}
		],
		"stateMutability": "pure",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"name": "transferHistory",
		"outputs": [
			{
				"internalType": "address",
				"name": "sender",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "recipient",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			},
			{
				"internalType": "uint256",
				"name": "timestamp",
				"type": "uint256"
			},
			{
				"internalType": "bool",
				"name": "status",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"name": "users",
		"outputs": [
			{
				"internalType": "string",
				"name": "name",
				"type": "string"
			},
			{
				"internalType": "bytes32",
				"name": "password",
				"type": "bytes32"
			},
			{
				"internalType": "bool",
				"name": "exists",
				"type": "bool"
			}
		],
		"stateMutability": "view",
		"type": "function"
	}
]'''
WEB3.eth.default_account = WEB3.eth.accounts[0]
App = WEB3.eth.contract(bytecode=bytecode, abi=abi)
tx_hash = App.constructor().transact()
tx_receipt = WEB3.eth.wait_for_transaction_receipt(tx_hash)
wallet_contract = WEB3.eth.contract(address=tx_receipt.contractAddress, abi=abi)
